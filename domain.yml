version: "3.1"

intents:
  - saudacao
  - despedida
  - agradecimento
  - afirmar
  - negar
  - bot_challenge
  - solicitar_ajuda
  - solicitar_agendamento
  - solicitar_especialidades
  - solicitar_info_clinica
  - informar_especialidade
  - informar_doutor
  - informar_email
  - informar_nome_paciente
  - informar_data_preferida
  - informar_horario_escolhido
  - agendamento_livre
  - informar_hora_preferida
  - informar_exame
  - solicitar_exames

entities:
  - especialidade
  - doctor_id
  - doctor_name
  - email
  - nome_paciente
  - data_preferida
  - horario_escolhido
  - hora

slots:
  especialidade:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: especialidade
  doctor_id:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: doctor_id
  doctor_name:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: doctor_name
  email:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: email
  nome_paciente:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: nome_paciente
  data_preferida:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: data_preferida
  horario_escolhido:
    type: text
    mappings:
    - type: from_entity
      entity: horario_escolhido
    - type: from_text
      intent: informar_horario_escolhido
  horarios_disponiveis:
    type: list
    influence_conversation: false
    mappings:
      - type: custom

responses:
  utter_saudacao:
    - text: "Ol√°! Sou seu assistente virtual da Cl√≠nica Super Saud√°vel. Como posso te ajudar hoje?"
  utter_despedida:
    - text: "At√© logo! Se precisar de mais alguma coisa, √© s√≥ chamar."
  utter_agradecimento:
    - text: "De nada! Fico feliz em ajudar! üòä"
  utter_iamabot:
    - text: "Eu sou um assistente virtual, pronto para te ajudar a agendar consultas e obter informa√ß√µes sobre a cl√≠nica."
  utter_solicitar_ajuda:
    - text: "Claro! Eu posso:\n- Agendar uma consulta para voc√™.\n- Listar nossas especialidades m√©dicas.\n- Fornecer informa√ß√µes sobre a cl√≠nica.\nO que voc√™ gostaria de fazer?"
  utter_info_clinica_placeholder:
    - text: "A Cl√≠nica Super Saud√°vel fica na Rua da Sa√∫de, 123. Nosso telefone √© (11) 5555-4444 e nosso site √© www.supersaudavel.com.br."
  utter_agendamento_cancelado:
      - text: "Tudo bem, o agendamento foi cancelado. Se precisar de algo mais, √© s√≥ me dizer."
  utter_default:
      - text: "Desculpe, n√£o entendi o que voc√™ quis dizer. Poderia reformular?"
  utter_ask_especialidade:
    - text: "Para qual especialidade voc√™ gostaria de agendar?"
  utter_ask_nome_paciente:
    - text: "Qual o nome completo do paciente?"
  utter_ask_email:
    - text: "E qual o seu e-mail para contato?"
  utter_ask_data_preferida:
    - text: "√ìtimo. Para qual dia voc√™ gostaria de agendar? (Ex: hoje, amanh√£, 25/07)"
  utter_ask_horario_escolhido:
    - text: "Perfeito! Encontrei os seguintes hor√°rios dispon√≠veis para {doctor_name} no dia {data_preferida}: {horarios_disponiveis}. Qual deles voc√™ prefere?"
  utter_nenhum_horario_disponivel:
    - text: "Desculpe, o(a) {doctor_name} n√£o tem hor√°rios dispon√≠veis para o dia {data_preferida}. Gostaria de tentar outra data?"
  utter_confirmacao_agendamento:
    - text: "Perfeito! Sua consulta com {doctor_name} ({especialidade}) est√° agendada para {data_preferida} √†s {horario_escolhido}. O ID do agendamento √© {agendamento_id}. At√© l√°!"
  utter_erro_agendamento:
    - text: "Pe√ßo desculpas, mas ocorreu um erro ao tentar finalizar seu agendamento. Por favor, tente novamente."

actions:
  - action_buscar_especialidades
  - action_ask_doctor_id
  - action_agendar_consulta
  - action_handle_general_question
  - action_extract_info_with_gemini
  - validate_formulario_agendamento

forms:
  formulario_agendamento:
    required_slots:
      - especialidade
      - doctor_id
      - nome_paciente
      - email
      - data_preferida
      - horario_escolhido

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true